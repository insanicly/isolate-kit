{"version":3,"file":"index.js","mappings":"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","sources":["webpack://isolate-kit/webpack/universalModuleDefinition","webpack://isolate-kit/./node_modules/isolated-vm/isolated-vm.js","webpack://isolate-kit/./node_modules/isolated-vm/out/isolated_vm.node","webpack://isolate-kit/webpack/bootstrap","webpack://isolate-kit/webpack/runtime/compat get default export","webpack://isolate-kit/webpack/runtime/define property getters","webpack://isolate-kit/webpack/runtime/global","webpack://isolate-kit/webpack/runtime/hasOwnProperty shorthand","webpack://isolate-kit/webpack/runtime/make namespace object","webpack://isolate-kit/webpack/runtime/node module decorator","webpack://isolate-kit/webpack/runtime/publicPath","webpack://isolate-kit/./src/lib/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"isolate-kit\"] = factory();\n\telse\n\t\troot[\"isolate-kit\"] = factory();\n})(this, () => {\nreturn ","module.exports = require('./out/isolated_vm').ivm;\n","\ntry {\n  process.dlopen(module, __dirname + require(\"path\").sep + __webpack_public_path__ + \"5226847cbe8e69d8da5dc354c4a0b90c.node\");\n} catch (error) {\n  throw new Error('node-loader:\\n' + error);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","import { Context, Isolate } from \"isolated-vm\";\n\nexport class IsolateKit {\n  isolate: Isolate;\n  isolateContext: Context;\n  constructor() {\n    console.log(\"IsolateKit constructor loaded\");\n    this.isolate = new Isolate({ memoryLimit: 128 });\n\n    this.isolateContext = this.isolate.createContextSync();\n    const jail = this.isolateContext.global;\n    jail.setSync(\"global\", jail.derefInto());\n  }\n\n  run = (code: string): any => {\n    console.log(\"IsolateKit method fired for code\", code);\n    const compiledCode = this.isolate.compileScriptSync(code);\n    const result = compiledCode.runSync(this.isolateContext);\n    return result;\n  };\n}\n"],"names":["root","factory","exports","module","define","amd","this","process","dlopen","error","Error","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","id","loaded","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","e","window","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nmd","paths","children","scriptUrl","importScripts","location","document","currentScript","src","scripts","getElementsByTagName","length","i","replace","p","IsolateKit","_createClass","_this","_classCallCheck","_defineProperty","code","console","log","isolate","compileScriptSync","runSync","isolateContext","Isolate","memoryLimit","createContextSync","jail","global","setSync","derefInto"],"sourceRoot":""}